(this["webpackJsonpshopify-app"]=this["webpackJsonpshopify-app"]||[]).push([[0],{45:function(e,t,c){},46:function(e,t,c){},47:function(e,t,c){},48:function(e,t,c){"use strict";c.r(t);var s=c(0),i=c(1),n=c(16),a=c.n(n),o=c(2),r=c(7),l=c.n(r),j=c(17),d=c(18),b=c.n(d).a.create({baseURL:"http://www.omdbapi.com"}),u=function(e,t){return b.get("/?apikey=".concat("5f2a6108&"),{params:{s:e,type:"movie",page:t}})},m=function(e,t){var c=Object(i.useState)((function(){var c=window.localStorage.getItem(t);return c?JSON.parse(c):e})),s=Object(o.a)(c,2),n=s[0],a=s[1];return Object(i.useEffect)((function(){window.localStorage.setItem(t,JSON.stringify(n))}),[t,n]),[n,a]},v=function(){return Object(s.jsx)(s.Fragment,{})},O=function(e){var t=e.setMovies,c=e.setPage,i=e.page,n=e.total;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{onClick:function(){t([]),c(i-1)},className:"four wide column ui button ".concat(i<=1&&"disable"),children:Object(s.jsx)("i",{className:"chevron left icon"})}),Object(s.jsx)("div",{onClick:function(){t([]),c(i+1)},className:"four wide column ui button ".concat(i>=Math.ceil(n/10)&&"disable"),children:Object(s.jsx)("i",{className:"chevron right icon"})})]})},h=function(e){var t=e.debouncedValue,c=e.page,i=e.total;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{className:"four wide column",children:[Object(s.jsx)("br",{}),Object(s.jsx)("div",{className:"four column row",children:Object(s.jsxs)("h2",{children:['Results for "',t,'":']})})]}),Object(s.jsxs)("div",{className:"four wide right aligned column",children:[Object(s.jsx)("br",{}),Object(s.jsx)("div",{className:"four column row",children:Object(s.jsxs)("h4",{children:["Page ",c," of ",Math.ceil(i/10),":"]})})]})]})},x=function(e){var t=e.debouncedValue,c=e.page,i=e.setPage,n=e.setMovies,a=e.total;return Object(s.jsxs)("div",{className:"ui grid",children:[Object(s.jsx)(h,{debouncedValue:t,page:c,total:a}),Object(s.jsxs)("div",{className:"ui two column row",children:[Object(s.jsx)(O,{page:c,setPage:i,setMovies:n,total:a}),Object(s.jsx)(v,{})]})]})},f=function(e){var t=e.setMovies,c=m("Harry Potter"),n=Object(o.a)(c,2),a=n[0],r=n[1],d=Object(i.useState)(a),b=Object(o.a)(d,2),v=b[0],O=b[1],h=m(1,"page"),f=Object(o.a)(h,2),N=f[0],g=f[1],p=m(0,"total"),w=Object(o.a)(p,2),S=w[0],M=w[1];Object(i.useEffect)((function(){var e=function(){var e=Object(j.a)(l.a.mark((function e(c){var s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(c,N);case 2:s=e.sent,(i=s.data).Search&&(t(i.Search),M(i.totalResults)),i.Error&&(t([{error:1}]),M(0));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=setTimeout((function(){O(a),e(a)}),1e3);return function(){clearTimeout(c)}}),[a,v,t,M,N]);var C=Object(s.jsx)("div",{className:"ui segment search-bar",children:Object(s.jsx)("form",{onSubmit:function(e){return e.preventDefault()},className:"ui form",children:Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("label",{children:"Search for a movie"}),Object(s.jsx)("input",{value:a,type:"text",onChange:function(e){r(e.target.value),g(1)}})]})})});return Object(s.jsxs)("div",{children:[C,v&&S>0&&Object(s.jsx)(x,{debouncedValue:v,page:N,setPage:g,total:S,setMovies:t}),Object(s.jsx)("br",{}),Object(s.jsx)("br",{})]})},N=c(5),g=c(20),p=c(19),w=c(4),S=(c(45),c(46),function(e){var t=e.movie,c=e.onToggle,i=e.disabled,n=t.selected?"red":"olive",a=i&&!t.selected;return Object(s.jsxs)("div",{className:"ui relaxed list","data-tooltip":a?"You cannot nominate more than 5 movies.":void 0,children:[Object(s.jsx)("div",{className:"item content",children:Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:"header",children:t.Title}),Object(s.jsx)("div",{className:"description",children:t.Year}),Object(s.jsx)("button",{onClick:function(){return c(t)},className:"ui ".concat(n," button right floated movie-item \n               ").concat(a&&"disable"),children:t.selected?"Remove":"Nominate"})]})}),Object(s.jsx)("hr",{className:"bwidth"})]})}),M=function(e){var t=e.nominatedMovies,c=e.onToggle,i=e.children,n=t.map((function(e){return Object(s.jsx)(S,{movie:e,disabled:!1,color:"red",action:"Remove",onToggle:c},e.imdbID)}));return t.length>0?Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"eight wide column",children:[Object(s.jsx)("h2",{children:"Selected movies"}),Object(s.jsxs)("h3",{children:[t.length," of 5 selected."]}),n,i]})}):Object(s.jsx)("div",{className:"eight wide center aligned column",children:Object(s.jsxs)("div",{class:"ui placeholder segment",children:[Object(s.jsxs)("div",{class:"ui icon header",children:[Object(s.jsx)("i",{class:"hand point left icon"}),"No movies selected."]}),Object(s.jsx)("h4",{children:"Please search and select movies to nominate."})]})})},C=function(e){var t=e.nominatedMovies,c=e.onToggle,i=e.setConfirmationBanner,n=e.setSuccessBanner,a=e.setSearch;return Object(s.jsxs)("div",{className:"ui placeholder segment sixteen wide column",children:[Object(s.jsxs)("div",{className:"ui icon header",children:[Object(s.jsx)("i",{className:"question circle icon"}),"You have selected five movies. Are you sure these are the ones you want to nominate?"]}),Object(s.jsx)(M,{onToggle:c,nominatedMovies:t}),Object(s.jsxs)("div",{className:"inline",children:[Object(s.jsx)("button",{onClick:function(){a(!0),i(!1)},className:"ui button",children:"No, I want to change!"}),Object(s.jsx)("button",{onClick:function(){i(!1),n(!0)},className:"ui olive button",children:"Yes, I'm sure!"})]})]})},y=(c(47),function(e){var t=e.setConfirmationBanner,c=e.setNominatedMovies,i=e.nominatedMovies,n=e.setSearch;return Object(s.jsxs)("div",{className:"inline",children:[Object(s.jsx)("div",{onClick:function(){5===Object.values(i).length&&(n(!1),t(!0))},className:"ui right floated olive button ".concat(Object.values(i).length<5&&"disable"),children:"Confirm"}),Object(s.jsx)("button",{onClick:function(){return c({})},className:"ui right floated button",children:"Reset"})]})}),T=function(){return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Movie not found"}),Object(s.jsxs)("div",{className:"ui negative message",children:[Object(s.jsx)("div",{className:"header",children:"We're sorry we can't find this movie."}),Object(s.jsx)("p",{children:"Please specify more and try again."})]})]})},k=function(e){var t=e.fetchedMovies,c=e.onToggle,i=e.disabled,n=t.map((function(e){return Object(s.jsx)(S,{disabled:i,movie:e,action:"Nominate",color:"olive",onToggle:c},e.imdbID)}));return t.length?t[0].error?Object(s.jsx)(T,{}):n:Object(s.jsx)("div",{className:"eight wide center aligned column",children:Object(s.jsxs)("div",{className:"ui fluid placeholder",children:[Object(s.jsxs)("div",{className:"paragraph",children:[Object(s.jsx)("div",{className:"line"}),Object(s.jsx)("div",{className:"line"}),Object(s.jsx)("div",{className:"line"}),Object(s.jsx)("div",{className:"line"}),Object(s.jsx)("div",{className:"line"})]}),Object(s.jsxs)("div",{className:"paragraph",children:[Object(s.jsx)("div",{className:"line"}),Object(s.jsx)("div",{className:"line"}),Object(s.jsx)("div",{className:"line"})]}),Object(s.jsx)("div",{className:"image"}),Object(s.jsxs)("div",{className:"paragraph",children:[Object(s.jsx)("div",{className:"line"}),Object(s.jsx)("div",{className:"line"}),Object(s.jsx)("div",{className:"line"}),Object(s.jsx)("div",{className:"line"}),Object(s.jsx)("div",{className:"line"})]}),Object(s.jsxs)("div",{className:"paragraph",children:[Object(s.jsx)("div",{className:"line"}),Object(s.jsx)("div",{className:"line"}),Object(s.jsx)("div",{className:"line"}),Object(s.jsx)("div",{className:"line"}),Object(s.jsx)("div",{className:"line"}),Object(s.jsx)("div",{className:"line"}),Object(s.jsx)("div",{className:"line"})]})]})})},B=function(e){var t=e.setSuccessBanner,c=e.setConfirmationBanner,i=e.setNominatedMovies,n=e.setSearch;return Object(s.jsxs)("div",{className:"ui placeholder segment sixteen wide column",children:[Object(s.jsxs)("div",{className:"ui icon header",children:[Object(s.jsx)("i",{className:"thumbs up circle icon"}),"You have nominated five movies. Thanks for your feedback."]}),Object(s.jsx)("button",{className:"ui button olive",onClick:function(){return i({}),c(!1),t(!1),void n(!0)},children:"Nominate it again!"})]})},I=function(e){var t=e.initialMovies,c=e.total,i=e.setSearch,n=m({},"nominatedMovies"),a=Object(o.a)(n,2),r=a[0],l=a[1],j=m(!1,"ConfirmationBanner"),d=Object(o.a)(j,2),b=d[0],u=d[1],v=m(!1,"setSuccessBanner"),O=Object(o.a)(v,2),h=O[0],x=O[1],f=t.map((function(e){return Object(w.a)(Object(w.a)({},e),{},{selected:!!r[e.imdbID]})})),S=function(e){var t=e.imdbID,c=r[t],s=Object(g.a)(r,[t].map(p.a));l(c?s:Object(w.a)(Object(w.a)({},s),{},Object(N.a)({},e.imdbID,Object(w.a)(Object(w.a)({},e),{},{selected:!0})))),u(!1),i(!0)};return h?Object(s.jsx)(B,{setSearch:i,setNominatedMovies:l,setConfirmationBanner:u,setSuccessBanner:x}):b?Object(s.jsx)(C,{onToggle:S,setSearch:i,setConfirmationBanner:u,setSuccessBanner:x,nominatedMovies:Object.values(r)}):Object(s.jsx)("div",{className:"ui divided grid",children:Object(s.jsxs)("div",{className:"ui row",children:[Object(s.jsx)("div",{className:"eight wide column",children:Object(s.jsx)(k,{total:c,disabled:Object.values(r).length>=5,onToggle:S,fetchedMovies:f})}),Object(s.jsx)(M,{onToggle:S,nominatedMovies:Object.values(r),children:Object(s.jsx)(y,{setSearch:i,setConfirmationBanner:u,setNominatedMovies:l,nominatedMovies:r})})]})})},P=function(){var e=Object(i.useState)([]),t=Object(o.a)(e,2),c=t[0],n=t[1],a=Object(i.useState)(!0),r=Object(o.a)(a,2),l=r[0],j=r[1];return Object(s.jsxs)("div",{className:"ui container",children:[Object(s.jsx)("br",{}),Object(s.jsx)("h2",{className:"ui header",children:Object(s.jsx)("div",{className:"content",children:"The Shoppies"})}),l&&Object(s.jsx)(f,{setMovies:n}),Object(s.jsx)(I,{setSearch:j,initialMovies:c})]})};a.a.render(Object(s.jsx)(P,{}),document.querySelector("#root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.89e23fbd.chunk.js.map